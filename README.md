# a11y-select
## What is this project?
This project aims to be a no-frills replacement for native `<select>` elements
that can be targeted with CSS styles. It is based on the [WAI Select-Only
Combobox Example](https://www.w3.org/WAI/ARIA/apg/patterns/combobox/examples/combobox-select-only/).

## What is this project NOT?
1. This project is NOT a replacement for well-formed, semantic HTML. In fact,
this project performs a series of pre-flight checks to determine if
progressively enhancing the native element will result in an accessible user
experience and will abort if any critical issues are found.  It will **_not_**
attempt to automatically "fix" the web application.
2. This project is NOT a kitchen-sink build-a-combobox utility. History has
proven that a kitchen-sink approach to the combobox design pattern inevitably
leads to impossible to maintain code, maintainer burn-out, and poor
accessibility.
3. This project is NOT in the business of making unreasonable
backwards-compatibility accommodations. There are well documented expectations
in regard to what are supported customizations. If customizations are made
outside the documented expectations, expect breakages between releases.

## Basic Example
```html
<!DOCTYPE html>
<html lang="en">
  <meta charset="utf-8" />
  <title>a11y-select | Basic Example</title>
  <head>
    <link rel="stylesheet" href="dist/a11y-select.min.css">
  </head>
  <body>
    <label for="demo-select">Demo Select</label>
    <select id="demo-select">
      <option>Select an option</option>
      <option value="option-1">Option 1</option>
      <option value="option-2">Option 2</option>
      <option value="option-3">Option 3</option>
    </select>
    <script type="module">
      import {a11ySelect} from 'dist/a11y-select.min.mjs';
      a11ySelect(document.getElementById('demo-select'), 'demo');
    </script>
  </body>
</html>
```

## User Guide
### Prerequisites / Pre-flight Checks
1. This library actively prevents ID attribute collisions. When instantiating
a progressively enhanced select element, the caller must provide a unique ID
that will be internally tracked by the library. Attempting to initialize
multiple select elements with the same ID will result in a console error.

2. This library does not support multiple selection. The `<select multiple>`
design pattern suffers from well documented user experience problems.
Supporting this pattern is not on the roadmap and attempting to initialize
a select element with the multiple attribute will result in a console error.

3. This library does not support disabled select elements.  Disabling form
elements in general is highly discouraged and will result in inaccessible
user experiences. Attempting to initialize a disabled select element will
result in a console error.

4. This library does not support select elements without an accessible label.
This label can either be associated with the native control via the `for`
attribute, or implicitly via having a parent `<label>` element. Attempting to
initialize a select element without an accessible label will result in a
console error.

5. This library will emit warnings when the native select element contains
`<optgroup>` elements. There are known issues with Safari and Voiceover such
that [nested group accessible names are not announced properly](https://bugs.webkit.org/show_bug.cgi?id=293506).

6. This library will emit warnings when any child element of the native select
element has the `disabled` attribute.  Disabled options are not well-supported
by assistive technology, and as a result, then are filtered out of the
resulting combobox structure.

7. This library will emit warnings when the native select element undergoes
any changes outside the library itself.  The "dependent options" design pattern
should be avoided and may lead to confusion.

### How to customize (the right way)
This library exposes a number of CSS custom properties which can be used to
apply custom styling.

#### Unsupported customizations
The internal HTML structure that is generated by this library is not subject
to backwards-compatibility guarantees. Given the nature of assistive technology
and how difficult it is to maintain compatibility amongst all major vendors, it
is not possible to also guarantee stable markup.

1. Any attempts to override CSS via cascade is not subject to
backwards-compatibility guarantees.  Use the custom properties instead.
2. Any attempts to modify the structure of any element within the
`.a11y-select` element with javascript is not supported.
